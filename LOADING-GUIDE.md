# Chrome扩展加载和测试指南

## 📦 加载扩展到Chrome

### 步骤1: 打开扩展管理页面
1. 打开Chrome浏览器
2. 在地址栏输入: `chrome://extensions/`
3. 按回车键

### 步骤2: 启用开发者模式
1. 在扩展管理页面右上角找到"开发者模式"开关
2. 点击开关，启用开发者模式

### 步骤3: 加载扩展
1. 点击左上角的"加载已解压的扩展程序"按钮
2. 在文件选择对话框中，导航到项目目录
3. 选择 `chaoxing-extension` 文件夹
4. 点击"选择文件夹"

### 步骤4: 验证加载成功
扩展加载成功后，你应该看到：
- ✅ 扩展卡片显示"Chaoxing Copy & Paste Helper"
- ✅ 版本号显示"1.0.0"
- ✅ 没有错误提示
- ✅ 扩展图标显示（48x48和128x128）

## 🧪 测试扩展功能

### 方法1: 使用测试页面（推荐）

1. 在Chrome中打开 `chaoxing-extension/test-page.html`
2. 由于扩展只在 `*.chaoxing.com` 域名下工作，需要修改URL：
   - 打开Chrome DevTools (F12)
   - 在Console中执行: `history.pushState({}, '', 'https://test.chaoxing.com/test.html')`
   - 刷新页面
3. 按照测试页面的说明进行测试

### 方法2: 在真实超星网站测试

1. 访问任意超星学习通页面，例如：
   - https://www.chaoxing.com/
   - https://mooc1.chaoxing.com/
   - 或你的学校超星平台

2. 测试以下功能：

#### 测试1: 粘贴功能
- 尝试在输入框中粘贴文本 (Ctrl+V 或 右键粘贴)
- 尝试在文本域中粘贴内容
- 检查是否可以正常粘贴

#### 测试2: 文本选择
- 尝试选择页面上的文本
- 检查是否可以正常选择和复制

#### 测试3: 字体解密
- 查找页面上是否有加密字体（通常在题目中）
- 检查是否自动解密为可读文本
- 打开Console查看是否有解密日志

## 🔍 调试扩展

### 查看Console日志
1. 在超星页面上按F12打开DevTools
2. 切换到Console标签
3. 查找以 `[Chaoxing Helper]` 开头的日志

### 检查扩展是否注入
在Console中执行：
```javascript
// 检查全局样式是否注入
window.getComputedStyle(document.body).userSelect
// 应该返回 "text"

// 检查只读输入框是否被解除
document.querySelectorAll('input[readonly]').length
// 应该返回 0（如果页面有只读输入框的话）
```

### 查看扩展错误
1. 在 `chrome://extensions/` 页面
2. 找到"Chaoxing Copy & Paste Helper"扩展
3. 点击"错误"按钮查看是否有错误

## ⚠️ 常见问题

### 问题1: 扩展无法加载
**症状**: 点击"加载已解压的扩展程序"后没有反应或报错

**解决方案**:
- 检查是否选择了正确的文件夹（应该是包含manifest.json的文件夹）
- 检查manifest.json语法是否正确
- 查看错误信息并修复

### 问题2: 扩展加载了但不工作
**症状**: 扩展显示在列表中，但在超星网站上没有效果

**解决方案**:
- 确认你访问的是 `*.chaoxing.com` 域名
- 刷新页面（Ctrl+F5 强制刷新）
- 检查Console是否有错误信息
- 确认扩展已启用（在chrome://extensions/中检查）

### 问题3: 粘贴功能不工作
**症状**: 仍然无法粘贴内容

**解决方案**:
- 检查是否有其他扩展冲突
- 尝试禁用其他扩展后测试
- 查看Console日志确认扩展是否正常运行

### 问题4: 字体解密不工作
**症状**: 加密字体仍然显示为乱码

**解决方案**:
- 确认页面确实包含加密字体（查找 `.font-cxsecret` 类）
- 检查 `assets/table.json` 文件是否存在
- 查看Console是否有解密相关的日志或错误

## 📊 验证清单

在完成测试后，请确认以下项目：

- [ ] 扩展成功加载到Chrome
- [ ] 没有加载错误
- [ ] 可以在超星网站上看到扩展效果
- [ ] 粘贴功能正常工作
- [ ] 文本选择功能正常工作
- [ ] 字体解密功能正常工作（如果页面有加密字体）
- [ ] Console中有正确的日志输出
- [ ] 没有JavaScript错误

## 🎯 当前实现状态

### ✅ 已实现的功能
- 基础扩展架构
- 字体解密 (CopyEnabler)
- 粘贴限制解除 (PasteEnabler)
- 动态元素监听 (MutationObserver)

### ⏳ 待实现的功能
- UEditor富文本编辑器支持 (任务6)
- 一键复制所有题目 (任务5)
- Page Script注入 (任务6)

## 📝 反馈

如果在测试过程中发现问题，请记录：
1. 问题描述
2. 复现步骤
3. 浏览器版本
4. Console错误信息（如果有）
5. 测试的URL

这些信息将帮助快速定位和修复问题。
